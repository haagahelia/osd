<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Weather</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="css/main.css">
<link rel="stylesheet" type="text/css" href="css/prism.css">
<script src="js/jquery-1.11.3.min.js"></script><script src="js/bootstrap.min.js"></script><script src="js/prism.js"></script>
</head>
<body class="language-javascript" style="margin: 10px">
<h1>10.09&nbsp;Weather</h1>
<p>
<b>Difficulty: medium<br>
		          Size: M</b>
</p>
<br>
<div>


<p> 
Make a program that fetches the current weather of Helsinki in JSON format and shows it on a web page. Below you can see the weather information of the evening of 28.9.2015.
 <img class="bordered" src="xc/10.09.png">
JSON example (hard-coded data, you&rsquo;ll get similar from web with your code below):
<pre>
<code>
{
"coord":{"lon":24.94,"lat":60.17},
"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],
"base":"stations",
"main":{"temp":10.2,"pressure":1032,"humidity":66,"temp_min":10,"temp_max":11},
"visibility":10000,
"wind":{"speed":4.1,"deg":340},
"clouds":{"all":75},
"dt":1443459842,"sys":{"type":1,"id":5019,"message":0.0107,"country":"FI","sunrise":1443413956,"sunset":1443456059},"id":658225,"name":"Helsinki","cod":200
} 
// So we are not going to use that. Though you can use it for testing the 
// showWeatherInfo function
</code>
</pre>
Make your web page call a function, which in turn uses AJAX to make the weather information request to the "OpenWeatherMap.org"" web server.

<pre>
<code>
// This function fetches JSON data from internet using AJAX call:

function fetchWeatherInfo() {

    var xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange = function() {

        if (xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200) {
          // Line below writes the fetched JSON response (=text) to the console
          console.log(xmlhttp.responseText);

          // Call function that shows the output listing on the web page.
          // Pass the received JSON response as a parameter
          showWeatherInfo(xmlhttp.responseText);
        }
    }

    xmlhttp.open(
      "GET",
      "http://api.openweathermap.org/data/2.5/weather?q=helsinki&amp;units=metric",
       true);
    xmlhttp.send();
}


// This function shows the JSON text (that it receives as parameter) on the web // page

function showWeatherInfo(jsonText) {
// COMPLETE THIS!!! Remark: The JSON response from the web server contains a // single object NOT an array. Thus no for loop needed here.

    // You can use weather[0].description to get info out from that one object.


    // toFixed(0) will round values to whole numbers (= 0 decimals)
}</code>
</pre>

</p> 

<p>Submit a link to your code (myy or jsbin). </p>

	
<a class="jsbin-embed" href="http://jsbin.com/vuhunu/embed?html,js,output">JS Bin</a>

</div>
<a target="_blank" class="btn btn-success col-xs-12 col-sm-4" href="xc/10.09.html"><span class="glyphicon glyphicon-download"></span>&nbsp;&nbsp;Download Template Code</a><a target="_blank" class="btn btn-success col-xs-12 col-sm-4" href="http://jsbin.com/vuhunu/embed?html,js,output"><span class="glyphicon glyphicon-edit"></span>&nbsp;&nbsp;Start editing in JSBin</a><a target="_blank" class="btn btn-success col-xs-12 col-sm-4" href="http://hhmoodle.haaga-helia.fi/mod/assign/view.php?id=405727&amp;action=editsubmission"><span class="glyphicon glyphicon-check"></span>&nbsp;&nbsp;Return your solution at Moodle</a><a target="_blank" class="btn btn-success col-xs-12 col-sm-4" href="10.09.xml.standalone.html"><span class="glyphicon glyphicon-new-window"></span>&nbsp;&nbsp;Open assignment in a new window</a>
</body>
</html>
